<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GSoC 2020 Final Report • rco</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="GSoC 2020 Final Report">
<meta property="og:description" content="rco">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rco</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Optimizers
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/opt-common-subexpr.html">Common Subexpression Elimination</a>
    </li>
    <li>
      <a href="../articles/opt-cond-thread.html">Conditional Threading</a>
    </li>
    <li>
      <a href="../articles/opt-constant-folding.html">Constant Folding</a>
    </li>
    <li>
      <a href="../articles/opt-constant-propagation.html">Constant Propagation</a>
    </li>
    <li>
      <a href="../articles/opt-dead-code.html">Dead Code Elimination</a>
    </li>
    <li>
      <a href="../articles/opt-dead-expr.html">Dead Expression Elimination</a>
    </li>
    <li>
      <a href="../articles/opt-dead-store.html">Dead Store Elimination</a>
    </li>
    <li>
      <a href="../articles/opt-loop-invariant.html">Loop-invariant Code Motion</a>
    </li>
    <li>
      <a href="../articles/opt-memory-alloc.html">Memory Allocation</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/contributing-an-optimizer.html">Contributing an Optimizer</a>
    </li>
    <li>
      <a href="../articles/potential-optimizers.html">Potential Optimizers</a>
    </li>
    <li>
      <a href="../articles/docker-readme.html">Docker Image</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jcrodriguez1989/rco/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="gsoc2020-final-report_files/header-attrs-2.5/header-attrs.js"></script><link href="gsoc2020-final-report_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="gsoc2020-final-report_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>GSoC 2020 Final Report</h1>
                        <h4 class="author">Rahul Saxena</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jcrodriguez1989/rco/blob/master/vignettes/gsoc2020-final-report.Rmd"><code>vignettes/gsoc2020-final-report.Rmd</code></a></small>
      <div class="hidden name"><code>gsoc2020-final-report.Rmd</code></div>

    </div>

    
    
<div id="my-gsoc-2020-work-in-a-nutshell" class="section level1">
<h1 class="hasAnchor">
<a href="#my-gsoc-2020-work-in-a-nutshell" class="anchor"></a>My GSoC 2020 work in a nutshell</h1>
<p>Phew… So it’s already time for the end of <em>GSoC 2020</em>. Time sure flew by this summer. Now it’s the time for me to take a step back and ponder over my summer with <em>The R Project for Statistical Computing</em>. So, let’s touch upon my summer in a chronological fashion.</p>
<div id="humble-beginnings" class="section level2">
<h2 class="hasAnchor">
<a href="#humble-beginnings" class="anchor"></a>Humble Beginnings:</h2>
<p>Around the time when <em>The R Project for Statistical Computing</em> announced their participation in <em>GSoC 2020</em>, a list of proposed projects were announced. The <a href="https://cran.r-project.org/web/packages/rco/index.html"><code>rco</code></a> or the <strong>R Code Optimizer</strong> caught my attention at the very first moment and I didn’t look back since then.</p>
<p>Although the exsisting <a href="https://github.com/jcrodriguez1989/rco"><code>rco</code></a> repository was extremely well maintained and documented, me being a newbie still faced quite a lot of difficulties and also, most probably gave my mentors, <a href="https://jcrodriguez1989.github.io/">Dr. JC Rodriguez</a> and <a href="https://pacha.dev/">Mauricio “Pachá” Vargas Sepúlveda</a> a hard time.</p>
<p>As part of the <a href="https://github.com/rstats-gsoc/gsoc2020/wiki/rco%3A-The-R-Code-Optimizer#tests">tests</a> to be completed for being considered as a potential student developer for R with the <code>rco</code> project, I was required to build a completely functional and working optimizer.</p>
<p>I decided to work on a suggested optimizer that made <a href="https://rpubs.com/IACCancu/462502">column extraction</a> faster and more efficient. After the benign guidance of my mentors, I was able to come up with an column extraction optimizer, that performed according to its expectation. This got me so excited that I worked on and built another <a href="https://rpubs.com/IACCancu/462501">value extraction optimizer</a> without any explicit incentive :D</p>
<ul>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/152"><strong>PR for Column Extraction Optimizer</strong></a></li>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/155"><strong>PR for Value Extraction Optimizer</strong></a></li>
</ul>
</div>
<div id="post-gsoc-selection" class="section level2">
<h2 class="hasAnchor">
<a href="#post-gsoc-selection" class="anchor"></a>Post GSoC selection:</h2>
<p>It was only a few days before my acceptance into the GSoC 2020 program, that my mentors gave their insights into both these optimizers and explained, how these optimizers can be broken, owing to the extreme flexibility that the R Language offers. Since, <code><a href="https://rdrr.io/r/base/base-internal.html">.subset2( )</a></code> is not a reserved keyword in the R Language, it could be over-written. Hence we can never be sure while optimizing, that the functions that are being called has not been re-defined by the user. However, this served as a great primer as to what to expect when GSoC officially began.</p>
</div>
<div id="getting-up-to-speed" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-up-to-speed" class="anchor"></a>Getting up to speed:</h2>
<p>The next tasks that I were assigned were not too glorious/dramatic or blinge-y but they were essential steps for the upkeep of a package on <code>CRAN</code>. Firstly, I designed a vignette that enlisted all the <a href="https://rpubs.com/hinduBale/strategies_ideas_rco">future potential optimizers</a> that can be implemented in the <code>rco</code> package. Next, I went on to collate the efforts put in the <code>rco</code> library by the <em>Google Code-In</em> students, by creating PRs that such that every student gets credit as a contributor and at the same time hand-picking the best of examples and explanations to include in the official <code>rco</code> documentation. It was a riveting experience for me, as I had to learn and implement some really advanced concepts of <code>git</code> and <code>github</code> to be able to pull this off, including, but not limited to, <code>cherry-picking</code>, resolving <code>merge conficts</code>, adding <code>remotes</code>, etc.</p>
<ul>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/156"><strong>PR for the Potential Optimizers Vignette</strong></a></li>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/161"><strong>PR #1 related to Google Code-In</strong></a></li>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/163"><strong>PR #2 related to Google Code-In</strong></a></li>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/164"><strong>PR #3 related to Google Code-In</strong></a></li>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/165"><strong>PR #4 related to Google Code-In</strong></a></li>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/166"><strong>PR #5 related to Google Code-In</strong></a></li>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/167"><strong>PR #6 related to Google Code-In</strong></a></li>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/168"><strong>PR #7 related to Google Code-In</strong></a></li>
</ul>
</div>
<div id="unexpected-turn-of-events" class="section level2">
<h2 class="hasAnchor">
<a href="#unexpected-turn-of-events" class="anchor"></a>Unexpected Turn of Events:</h2>
<p>As <strong>Dwight D. Eisenhower</strong> once said,</p>
<p><em>In preparing for battle I have always found that plans are useless, but planning is indispensable.</em></p>
<p>I had listed several optimization techniques that could have been implemented in <code>rco</code> in my <a href="https://drive.google.com/file/d/1HvF0oE9gW4BYt2Lo-1zRl1dcbsG1wEPg/view">GSoC proposal</a> as well the <a href="https://rpubs.com/hinduBale/strategies_ideas_rco"><em>potential optimizers</em> vignette</a> but when we got down to discussing the design of these optimizers, it became quite clear to me and my mentors that we were walking on thin ice. With the extreme constraints that are imposed due to R’s flexible nature, only a few of our optimization strategies seemed bullet-proof.</p>
<div id="conditional-threading-optimizer" class="section level3">
<h3 class="hasAnchor">
<a href="#conditional-threading-optimizer" class="anchor"></a>Conditional Threading Optimizer:</h3>
<p>I went on ahead with the idea of <a href="https://beza1e1.tuxen.de/articles/jump_threading.html">Jump/Conditional Threading</a> and started designing the optimizer. The objective was to replace <code>if</code> statments with <code>else</code> wherever possible and also to group together the code blocks of different <code>if</code> blocks if the <code>if conditionals</code> were same. This concept is succintly covered over <a href="https://developers.redhat.com/blog/2019/03/13/intro-jump-threading-optimizations/">here</a>.</p>
<p>To see the speed-ups provided by this optimization strategy, have a look at this example:</p>
<div id="unoptimized-code" class="section level4">
<h4 class="hasAnchor">
<a href="#unoptimized-code" class="anchor"></a>Unoptimized Code</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cond_thread</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">evens</span> <span class="op">&lt;-</span> <span class="fl">0</span>
  <span class="va">evens_sum</span> <span class="op">&lt;-</span> <span class="fl">0</span>
  <span class="va">odds</span> <span class="op">&lt;-</span> <span class="fl">0</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">%%</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="co"># same logical as next if condition (can be merged)</span>
      <span class="va">evens</span> <span class="op">&lt;-</span> <span class="va">evens</span> <span class="op">+</span> <span class="fl">1</span>
    <span class="op">}</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">%%</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
      <span class="va">evens_sum</span> <span class="op">&lt;-</span> <span class="va">evens_sum</span> <span class="op">+</span> <span class="va">i</span>
    <span class="op">}</span>
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">i</span> <span class="op">%%</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> <span class="co"># exact negation as previous if (can be an else)</span>
      <span class="va">odds</span> <span class="op">&lt;-</span> <span class="va">odds</span> <span class="op">+</span> <span class="fl">1</span>
    <span class="op">}</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="proposed-optimized-code" class="section level4">
<h4 class="hasAnchor">
<a href="#proposed-optimized-code" class="anchor"></a>Proposed Optimized Code</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cond_thread_opt</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">evens</span> <span class="op">&lt;-</span> <span class="fl">0</span>
  <span class="va">evens_sum</span> <span class="op">&lt;-</span> <span class="fl">0</span>
  <span class="va">odds</span> <span class="op">&lt;-</span> <span class="fl">0</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">%%</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="co"># merged</span>
      <span class="va">evens</span> <span class="op">&lt;-</span> <span class="va">evens</span> <span class="op">+</span> <span class="fl">1</span>
      <span class="va">evens_sum</span> <span class="op">&lt;-</span> <span class="va">evens_sum</span> <span class="op">+</span> <span class="va">i</span>
    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> <span class="co"># converted to else</span>
      <span class="va">odds</span> <span class="op">&lt;-</span> <span class="va">odds</span> <span class="op">+</span> <span class="fl">1</span>
    <span class="op">}</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="benchmark" class="section level4">
<h4 class="hasAnchor">
<a href="#benchmark" class="anchor"></a>Benchmark</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">100000</span>
<span class="fu">autoplot</span><span class="op">(</span><span class="fu">microbenchmark</span><span class="op">(</span><span class="fu">cond_thread</span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="fu">cond_thread_opt</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="gsoc2020-final-report_files/figure-html/cond_thread_thread_benchmark-1.png" width="700"></p>
<ul>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/162"><strong>PR for the Conditional Threading Optimizer</strong></a></li>
</ul>
</div>
</div>
<div id="memory-allocation-optimizer" class="section level3">
<h3 class="hasAnchor">
<a href="#memory-allocation-optimizer" class="anchor"></a>Memory Allocation Optimizer:</h3>
<p>Next, I set my eyes on the <a href="https://insightr.wordpress.com/2018/08/23/growing-objects-and-loop-memory-pre-allocation/">Memory Pre-Allocation optimization technique</a>. The objective here was to save the <em>R Programmers</em> from the sin of growing a vector in loops. In our experience, we’ve seen that vector, lists, etc are initialized often with <code>NULL</code> or <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> out of convenience. Bothering about the size of the vectors may seem trivial to the programmer, but it has a huge impact on the performance of the script.</p>
<p>To see the speed-ups provided by this optimization strategy, consider this example:</p>
<div id="unoptimized-code-1" class="section level4">
<h4 class="hasAnchor">
<a href="#unoptimized-code-1" class="anchor"></a>Unoptimized Code</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mem_alloc</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">vec</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">vec</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">i</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="proposed-optimized-code-1" class="section level4">
<h4 class="hasAnchor">
<a href="#proposed-optimized-code-1" class="anchor"></a>Proposed Optimized Code</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mem_alloc_opt</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">vector</a></span><span class="op">(</span>length <span class="op">=</span> <span class="va">n</span><span class="op">)</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">vec</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">i</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="benchmark-1" class="section level4">
<h4 class="hasAnchor">
<a href="#benchmark-1" class="anchor"></a>Benchmark</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">100000</span>
<span class="fu">autoplot</span><span class="op">(</span><span class="fu">microbenchmark</span><span class="op">(</span><span class="fu">mem_alloc</span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, <span class="fu">mem_alloc_opt</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="gsoc2020-final-report_files/figure-html/pre_allocate_benchmark-1.png" width="700"></p>
<ul>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/169"><strong>PR for the Memory Allocation Optimizer</strong></a></li>
</ul>
</div>
</div>
</div>
<div id="pivot-and-push" class="section level2">
<h2 class="hasAnchor">
<a href="#pivot-and-push" class="anchor"></a>Pivot and Push:</h2>
<p>As mentioned in the last segment, we had pretty much exhausted all the possible optimization strategies, that could be implemented without breaking. Now, it was onto us to decide whether, to work on new optimizer, that had a non-zero chance of breaking or pivot and change objectives. Following the lead of my mentors, I decided to put on hold, the optimizers that could break and focus on further bolstering the <code>rco</code> package.</p>
<div id="fixing-a-critical-issue" class="section level3">
<h3 class="hasAnchor">
<a href="#fixing-a-critical-issue" class="anchor"></a>Fixing a critical issue:</h3>
<p>Owing to the fantastic upkeep of the <code>rco</code> repository, it had almost no bugs in the optimizers, and that is no mean feat. However <a href="https://github.com/jcrodriguez1989/rco/issues/107">an issue reporting a bug</a> was reported. The bug was that an optimizer, namely <code>opt-dead-expr()</code> did not function when the user used <code>;</code>. Ideally, the optimizer shouldn’t have been affected by the usage of <code>;</code>, but here it was, a bug, laying dormant for over 6 months.</p>
<p>I decided to tackle this bug head on. I <a href="https://github.com/hinduBale/rco/tree/issue%23107">created a separate branch</a> for this bug and reproduced the bug. After lots of trials and tribulations and lots of reverse-engineering, I zeroed in one the problem. It was a problem that existed in very low-level R code. When a R script without the use of <code>;</code> is parsed, then they get tokenized as something called <code>expr</code> but when <code>;</code> was used, the parser tokenized them as an <code>exprlist</code>. The exsisting optimizer did not handle the case of <code>exprlist</code>, so I appended code that handled <code>exprlist</code> and then the optimizer started functioning normally irrespective of the usage of <code>;</code>. This is an issue which could arise in other optimizers too, but given that, it has been solved in one optimizer, solving them in other optimizers would not prove challenging. Also, in the process of making the <code><a href="../reference/opt_dead_expr.html">opt_dead_expr()</a></code> optimizer work, I further bolstered the robustness of the optimizer by <strong>doubling the number of test cases</strong> that the optimizer must pass, including tests with <code>;</code>.</p>
<ul>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/170"><strong>PR for solution of issue #107</strong></a></li>
</ul>
</div>
<div id="call-for-actions" class="section level3">
<h3 class="hasAnchor">
<a href="#call-for-actions" class="anchor"></a>Call for Actions:</h3>
<p>To reduce dependencies on 3rd party applications and to promote homogeneity, we decided to go for an in-house solution for the CI/CD needs of our package, ie <code>Github Actions</code>. Earlier the popular choice for carrying out CI/CD operations were 3rd party applications such as <em>Travis CI</em> or <em>codecov.io</em>, but lately more and more developers and organizations had been migrating to Github Actions and we decided to follow suit. <em>Github Marketplace</em> wasn’t much help, as there were not much support for the <strong>R Language</strong> as compared to other languages such as <em>Rust</em>, <em>Ruby</em>, <em>Typescript</em>, etc. So, I went through several documentations and scarce examples and <a href="https://github.com/hinduBale/rco/tree/ghActions">created a branch</a> that <a href="https://hindubale.github.io/rco/">renders a website</a> and completes the testing that Travis used to do. We left out the <em>code coverage</em> as <em>Github</em> <a href="https://github.com/r-lib/actions/issues/156#event-3643325125">does not yet support badges that shows the percentage</a> of coverage.</p>
</div>
<div id="acting-on-users-recommendations" class="section level3">
<h3 class="hasAnchor">
<a href="#acting-on-users-recommendations" class="anchor"></a>Acting on users’ recommendations:</h3>
<p>One of the users of <code>rco</code> opened an issue, with a <a href="https://github.com/jcrodriguez1989/rco/issues/72">feature request</a>. The request that the user asked for, is as follows:</p>
<blockquote>
<p>I think it would be nifty to be able to create a report out of <code>rco</code> optimisers. The idea would be to analyse the whole code and return some kind of markdown / bookdown that will list all the results from the optimisers, without changing the &gt; original code. It might be useful to analyse your own code and learn what you could do better, but also it could be use in the industry to analyse the quality of code.</p>
</blockquote>
<p>While actually implementing this idea, would have been a tall order, me and my mentors discussed that, as the first iteration we could work on creating a function, which could be called to check, exactly how many files from a folder or a group of files can be optimized and which optimizer is being used there. If interested, the user could run that specific file along with the optimizers named in the output, in the <code><a href="../reference/rco_gui.html">rco_gui()</a></code> function and see the code difference.</p>
<ul>
<li><a href="https://github.com/jcrodriguez1989/rco/pull/171"><strong>PR for the reporting function</strong></a></li>
</ul>
</div>
</div>
<div id="and-my-gsoc-20-journey-comes-to-an-end" class="section level2">
<h2 class="hasAnchor">
<a href="#and-my-gsoc-20-journey-comes-to-an-end" class="anchor"></a>And, my GSoC ’20 journey comes to an end:</h2>
<p>Well, I never thought that 3 months could pass in a jiffy, but these months when I was working under the <em>R Language</em> in this program, had been the golden months of my life. Never to be forgotten and to be re-lived time and again. I am proud and happy to state that, my GSoC experience and project was mostly a hit. Yes, we did face obstacles, but each and every time we emerged stronger. I have now become a life-long fan of open-source.</p>
<blockquote>
<p>Open source is simply put, magic. And, no one can ever get enough of magic, right &gt;.&lt;</p>
</blockquote>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Juan Cruz Rodriguez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
